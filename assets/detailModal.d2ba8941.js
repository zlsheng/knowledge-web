var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,o=Object.getOwnPropertySymbols,r=Object.prototype.propertyIsEnumerable,s=(t,o,r)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,i=(e,t,o)=>new Promise(((r,s)=>{var i=e=>{try{n(o.next(e))}catch(t){s(t)}},a=e=>{try{n(o.throw(e))}catch(t){s(t)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);n((o=o.apply(e,t)).next())}));import{_ as a,b as n}from"./useModal.7f0d4937.js";import{e as l,f as c}from"./useForm.551ed3f6.js";import{n as d}from"./tableData.59ae2a9f.js";import{u as m,s as p}from"./Editor.9f53a30f.js";import{d as u,f,G as j,e as b,Y as g,Q as v,R as y,_ as O,c as h,x}from"./vendor.445a818e.js";import"./index.9eab7d25.js";import"./useWindowSizeFn.4826c9d6.js";import"./FullscreenOutlined.b91c2893.js";import"./index.16147537.js";import"./index.5eb2f555.js";import"./responsiveObserve.c545f1cc.js";import"./_baseIteratee.4c28a80c.js";import"./get.0c0a01c7.js";import"./findIndex.2cb8eacb.js";import"./index.87ed27e4.js";import"./RedoOutlined.7c6eecfd.js";import"./index.81514f39.js";import"./index.defcffb6.js";import"./UpOutlined.241fc329.js";import"./index.286ee882.js";import"./uuid.c3296435.js";import"./uniqBy.c7a7bfeb.js";import"./index.f3978ac3.js";import"./onMountedOrActivated.62880f89.js";var F=u({name:"NewsModal",components:{BasicModal:a,BasicForm:l},emits:["success","register"],setup(e,{emit:a}){const l=m(),u=f(!0),[g,{setFieldsValue:v,updateSchema:y,resetFields:O,validate:h}]=c({labelWidth:100,schemas:d,showActionButtonGroup:!1,actionColOptions:{span:23}}),[x,{setModalProps:F,closeModal:M}]=n((e=>i(this,null,(function*(){O(),F({confirmLoading:!1}),u.value=!!(null==e?void 0:e.isUpdate),j(u)&&v(((e,i)=>{for(var a in i||(i={}))t.call(i,a)&&s(e,a,i[a]);if(o)for(var a of o(i))r.call(i,a)&&s(e,a,i[a]);return e})({},e.record));const i=l.tags;y({field:"tag",componentProps:{options:i}})}))));return{registerModal:x,registerForm:g,getTitle:b((()=>j(u)?"编辑资讯":"新增资讯")),handleSubmit:function(){return i(this,null,(function*(){try{const e=yield h();F({confirmLoading:!0}),e.imageUrl=e.imageUrl[0],yield p(e),M(),a("success")}finally{F({confirmLoading:!1})}}))}}}});F.render=function(e,t,o,r,s,i){const a=g("BasicForm"),n=g("BasicModal");return v(),y(n,x(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:O((()=>[h(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default F;
