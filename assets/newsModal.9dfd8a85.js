var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,o=(t,r,i)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,s=(e,t,r)=>new Promise(((i,o)=>{var s=e=>{try{n(r.next(e))}catch(t){o(t)}},a=e=>{try{n(r.throw(e))}catch(t){o(t)}},n=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);n((r=r.apply(e,t)).next())}));import{_ as a,b as n}from"./useModal.7f0d4937.js";import{e as l,f as d}from"./useForm.551ed3f6.js";import{n as c}from"./tableData.59ae2a9f.js";import{s as m}from"./Editor.9f53a30f.js";import{d as p,f,e as u,G as j,Y as b,Q as g,R as y,x as v,_ as O,c as x}from"./vendor.445a818e.js";import"./index.9eab7d25.js";import"./useWindowSizeFn.4826c9d6.js";import"./FullscreenOutlined.b91c2893.js";import"./index.16147537.js";import"./index.5eb2f555.js";import"./responsiveObserve.c545f1cc.js";import"./_baseIteratee.4c28a80c.js";import"./get.0c0a01c7.js";import"./findIndex.2cb8eacb.js";import"./index.87ed27e4.js";import"./RedoOutlined.7c6eecfd.js";import"./index.81514f39.js";import"./index.defcffb6.js";import"./UpOutlined.241fc329.js";import"./index.286ee882.js";import"./uuid.c3296435.js";import"./uniqBy.c7a7bfeb.js";import"./index.f3978ac3.js";import"./onMountedOrActivated.62880f89.js";var h=p({name:"NewsModal",components:{BasicModal:a,BasicForm:l},emits:["success","register"],setup(e,{emit:a}){const l=f(!0);let p="";const[b,{setFieldsValue:g,resetFields:y,validate:v}]=d({labelWidth:100,schemas:c,showActionButtonGroup:!1,actionColOptions:{span:23}}),[O,{setModalProps:x,closeModal:h}]=n((e=>s(this,null,(function*(){yield y(),x({confirmLoading:!1}),l.value=!!(null==e?void 0:e.isUpdate),j(l)&&(p=e.record.id,yield g(((e,s)=>{for(var a in s||(s={}))t.call(s,a)&&o(e,a,s[a]);if(r)for(var a of r(s))i.call(s,a)&&o(e,a,s[a]);return e})({},e.record)))}))));return{registerModal:O,registerForm:b,getTitle:u((()=>j(l)?"编辑资讯":"新增资讯")),handleSubmit:function(){return s(this,null,(function*(){try{const e=yield v();x({confirmLoading:!0}),e.imageUrl=e.imageUrl[0],j(l)&&(e.id=p),yield m(e),h(),a("success")}finally{x({confirmLoading:!1})}}))}}}});h.render=function(e,t,r,i,o,s){const a=b("BasicForm"),n=b("BasicModal");return g(),y(n,v(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:O((()=>[x(a,{onRegister:e.registerForm},null,8,["onRegister"])])),_:1},16,["onRegister","title","onOk"])};export default h;
