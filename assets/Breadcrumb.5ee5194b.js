var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&r(e,o,l[o]);if(a)for(var o of a(l))n.call(l,o)&&r(e,o,l[o]);return e};import{B as o}from"./index.37dca516.js";import{ap as u,al as i,au as s,g as c,aS as d,ag as m,h as v,bS as h,aw as p,aO as f,at as b,d6 as g}from"./index.9eab7d25.js";import{d as y,f as C,g as x,Y as k,Q as w,R as I,c as O,_ as j,a0 as B,S as P,q as S}from"./vendor.445a818e.js";var M=y({name:"LayoutBreadcrumb",components:{Icon:u,[o.name]:o},props:{theme:i.oneOf(["dark","light"])},setup(){const e=C([]),{currentRoute:t}=s(),{prefixCls:a}=c("layout-breadcrumb"),{getShowBreadCrumbIcon:n}=d(),r=m(),{t:o}=v();function u(e,t){const a=[];return e.forEach((e=>{var n,r;t.includes(e.path)&&a.push(l(l({},e),{name:(null==(n=e.meta)?void 0:n.title)||e.name})),(null==(r=e.children)?void 0:r.length)&&a.push(...u(e.children,t))})),a}return x((()=>{return a=this,n=null,r=function*(){var a,n,r;if(t.value.name===p)return;const o=yield f(),i=t.value.matched,s=null==i?void 0:i[i.length-1];let c=t.value.path;s&&(null==(a=null==s?void 0:s.meta)?void 0:a.currentActiveMenu)&&(c=s.meta.currentActiveMenu);const d=b(o,c),m=u(o.filter((e=>e.path===d[0])),d);if(!m||0===m.length)return;const v=g(m,(e=>{const{meta:t,name:a}=e;if(!t)return!!a;const{title:n,hideBreadcrumb:r,hideMenu:l}=t;return!(!n||r||l)})).filter((e=>{var t,a;return!(null==(t=e.meta)?void 0:t.hideBreadcrumb)||!(null==(a=e.meta)?void 0:a.hideMenu)}));(null==(n=t.value.meta)?void 0:n.currentActiveMenu)&&v.push(l(l({},t.value),{name:(null==(r=t.value.meta)?void 0:r.title)||t.value.name})),e.value=v},new Promise(((e,t)=>{var l=e=>{try{u(r.next(e))}catch(a){t(a)}},o=e=>{try{u(r.throw(e))}catch(a){t(a)}},u=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,o);u((r=r.apply(a,n)).next())}));var a,n,r})),{routes:e,t:o,prefixCls:a,getIcon:function(e){var t;return e.icon||(null==(t=e.meta)?void 0:t.icon)},getShowBreadCrumbIcon:n,handleClick:function(e,t,a){null==a||a.preventDefault();const{children:n,redirect:l,meta:o}=e;if(!(null==n?void 0:n.length)||l){if(!(null==o?void 0:o.carryParam))if(l&&h(l))r(l);else{let e="";if(1===t.length)e=t[0];else{e=`${t.slice(1).pop()||""}`}e=/^\//.test(e)?e:`/${e}`,r(e)}}else null==a||a.stopPropagation()},hasRedirect:function(e,t){return e.indexOf(t)!==e.length-1}}}});const R={key:1};M.render=function(e,t,a,n,r,l){const o=k("Icon"),u=k("router-link"),i=k("a-breadcrumb");return w(),I("div",{class:[e.prefixCls,`${e.prefixCls}--${e.theme}`]},[O(i,{routes:e.routes},{itemRender:j((({route:t,routes:a,paths:n})=>[e.getShowBreadCrumbIcon&&e.getIcon(t)?(w(),I(o,{key:0,icon:e.getIcon(t)},null,8,["icon"])):B("",!0),e.hasRedirect(a,t)?(w(),I(u,{key:2,to:"",onClick:a=>e.handleClick(t,n,a)},{default:j((()=>[S(P(e.t(t.name||t.meta.title)),1)])),_:2},1032,["onClick"])):(w(),I("span",R,P(e.t(t.name||t.meta.title)),1))])),_:1},8,["routes"])],2)};export default M;
