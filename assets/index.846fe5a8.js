import{_ as e,u as t}from"./useTable.59d4379d.js";import{_ as o}from"./useForm.551ed3f6.js";import{g as a,a as i}from"./tableData.59ae2a9f.js";import{u as r,n,g as s,d}from"./Editor.9f53a30f.js";import{B as l,h as c}from"./index.9eab7d25.js";import{_ as u}from"./PageWrapper.82dec425.js";import{T as m}from"./index.81514f39.js";import{I as f}from"./index.16147537.js";import p from"./newsModal.9dfd8a85.js";import g from"./detailModal.922e77cb.js";import{u as j}from"./useModal.7f0d4937.js";import{P as b}from"./PlusOutlined.6dfdcf6e.js";import{d as h,Y as x,Q as T,R as M,_ as S,c as w,q as C,S as I}from"./vendor.445a818e.js";import"./index.54ee86d6.js";import"./uuid.c3296435.js";import"./uniqBy.c7a7bfeb.js";import"./_baseIteratee.4c28a80c.js";import"./get.0c0a01c7.js";import"./findIndex.2cb8eacb.js";import"./scrollTo.c1e0f75f.js";import"./transButton.5742404b.js";import"./index.defcffb6.js";import"./UpOutlined.241fc329.js";import"./index.286ee882.js";import"./useWindowSizeFn.4826c9d6.js";import"./onMountedOrActivated.62880f89.js";import"./index.f3978ac3.js";import"./useSortable.98befea8.js";import"./RedoOutlined.7c6eecfd.js";import"./FullscreenOutlined.b91c2893.js";import"./index.87ed27e4.js";import"./index.5eb2f555.js";import"./responsiveObserve.c545f1cc.js";import"./usePageContext.1ed373ad.js";import"./index.37dca516.js";import"./index.c9ee6373.js";import"./ArrowLeftOutlined.8f27299a.js";var v=h({components:{BasicTable:e,Tag:m,Image:f,Button:l,PlusOutlined:b,PageWrapper:u,TableAction:o,NewsModal:p,DetailModal:g},setup(){const{t:e}=c(),o=r(),[l,{openModal:u}]=j(),[m,{openModal:f}]=j(),[p,{reload:g}]=t({api:n,columns:a(),bordered:!0,useSearchForm:!0,showIndexColumn:!1,formConfig:i(),showTableSetting:!0,actionColumn:{width:120,title:e("routes.Information.infoTable.action"),dataIndex:"action",slots:{customRender:"action"}}});return{t:e,registerTable:p,registerModal:l,registerDetail:m,getTagName:e=>{let t="";return o.getTags.forEach((o=>{o.id===e&&(t=o.tagName)})),t},handleEdit:function(e){let t=[];t.push(e.imageUrl),e.imageUrl=t,u(!0,{record:e,isUpdate:!0})},handleDelete:function(e){d(e.id),g()},handleSuccess:function(){g()},handleCreate:function(){u(!0,{isUpdate:!1})},addDetail:function(e){return t=this,o=null,a=function*(){const t=yield s(e.detailId);f(!0,{detail:t})},new Promise(((e,i)=>{var r=e=>{try{s(a.next(e))}catch(t){i(t)}},n=e=>{try{s(a.throw(e))}catch(t){i(t)}},s=t=>t.done?e(t.value):Promise.resolve(t.value).then(r,n);s((a=a.apply(t,o)).next())}));var t,o,a}}}});v.render=function(e,t,o,a,i,r){const n=x("Tag"),s=x("Image"),d=x("PlusOutlined"),l=x("Button"),c=x("TableAction"),u=x("BasicTable"),m=x("NewsModal"),f=x("DetailModal"),p=x("PageWrapper");return T(),M(p,{title:e.t("routes.Information.Submodule.infoManage")},{default:S((()=>[w(u,{onRegister:e.registerTable},{tag:S((({record:t})=>[w(n,{color:"success"},{default:S((()=>[C(I(e.getTagName(t.tag)),1)])),_:2},1024)])),imageUrl:S((({record:e})=>[w(s,{width:80,src:e.imageUrl,placeholder:!0},null,8,["src"])])),toolbar:S((()=>[w(l,{type:"link",onClick:e.handleCreate},{icon:S((()=>[w(d)])),default:S((()=>[C(" "+I(e.t("routes.Information.button.add")),1)])),_:1},8,["onClick"])])),action:S((({record:t})=>[w(c,{actions:[{icon:"ant-design:diff-outline",onClick:e.addDetail.bind(null,t)},{icon:"ant-design:edit-outline",onClick:e.handleEdit.bind(null,t)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:e.handleDelete.bind(null,t)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),w(m,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),w(f,{onRegister:e.registerDetail,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])),_:1},8,["title"])};export default v;
