import{_ as e,g as r}from"./DetailModal.cc9821df.js";import{_ as o,u as t}from"./useTable.59d4379d.js";import{_ as i}from"./useForm.551ed3f6.js";import{u as s}from"./useModal.7f0d4937.js";import{h as a,cS as n,E as l}from"./index.9eab7d25.js";import{d as c,f as d,w as u,n as m,Y as f,Q as p,R as j,F as b,a2 as g,k as x,v as y,c as v,_ as E,q as h,S as w}from"./vendor.445a818e.js";import"./useDescription.a4648704.js";import"./responsiveObserve.c545f1cc.js";import"./get.0c0a01c7.js";import"./index.81514f39.js";import"./index.54ee86d6.js";import"./uuid.c3296435.js";import"./uniqBy.c7a7bfeb.js";import"./_baseIteratee.4c28a80c.js";import"./findIndex.2cb8eacb.js";import"./index.16147537.js";import"./index.5eb2f555.js";import"./scrollTo.c1e0f75f.js";import"./transButton.5742404b.js";import"./index.defcffb6.js";import"./UpOutlined.241fc329.js";import"./index.286ee882.js";import"./useWindowSizeFn.4826c9d6.js";import"./onMountedOrActivated.62880f89.js";import"./index.f3978ac3.js";import"./useSortable.98befea8.js";import"./RedoOutlined.7c6eecfd.js";import"./FullscreenOutlined.b91c2893.js";import"./index.87ed27e4.js";var R=c({name:"ErrorHandler",components:{DetailModal:e,BasicTable:o,TableAction:i},setup(){const e=d(),o=d([]),{t:i}=a(),c=n(),[f,{setTableData:p}]=t({title:i("sys.errorLog.tableTitle"),columns:r(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[j,{openModal:b}]=s();return u((()=>c.getErrorLogInfoList),(e=>{m((()=>{p(l(e))}))}),{immediate:!0}),{register:f,registerModal:j,handleDetail:function(r){e.value=r,b(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){o.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:function(){return e=this,r=null,o=function*(){},new Promise(((t,i)=>{var s=e=>{try{n(o.next(e))}catch(r){i(r)}},a=e=>{try{n(o.throw(e))}catch(r){i(r)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,a);n((o=o.apply(e,r)).next())}));var e,r,o},imgList:o,rowInfo:e,t:i}}});const k={class:"p-4"};R.render=function(e,r,o,t,i,s){const a=f("DetailModal"),n=f("a-button"),l=f("TableAction"),c=f("BasicTable");return p(),j("div",k,[(p(!0),j(b,null,g(e.imgList,(e=>x((p(),j("img",{key:e,src:e},null,8,["src"])),[[y,!1]]))),128)),v(a,{info:e.rowInfo,onRegister:e.registerModal},null,8,["info","onRegister"]),v(c,{onRegister:e.register,class:"error-handle-table"},{toolbar:E((()=>[v(n,{onClick:e.fireVueError,type:"primary"},{default:E((()=>[h(w(e.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),v(n,{onClick:e.fireResourceError,type:"primary"},{default:E((()=>[h(w(e.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),v(n,{onClick:e.fireAjaxError,type:"primary"},{default:E((()=>[h(w(e.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:E((({record:r})=>[v(l,{actions:[{label:e.t("sys.errorLog.tableActionDesc"),onClick:e.handleDetail.bind(null,r)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default R;
